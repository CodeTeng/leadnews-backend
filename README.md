# leadnews-backend
某马头条项目是对在线教育平台业务进行大数据统计分析的系统。该项目采用当下火热的微服务+大数据技术架构实现。本项目主要着手于获取最新最热新闻资讯，通过大数据分析用户喜好精确推送咨询新闻。

本模块是该项目的后端代码，前端代码地址：
****
## 业务说明
该平台分为：后台管理平台、自媒体平台、app端
### 功能架构图
![image](https://user-images.githubusercontent.com/82208902/212293087-cb8f2a7f-1836-408a-acac-2be58a83a351.png)
### APP 主要功能大纲
- 频道栏：用户可以通过此功能添加自己感兴趣的频道，在添加标签时，系统可依据用户喜好进行推荐
- 文章列表：需要显示文章标题、文章图片、评论数等信息，且需要监控文章是否在APP端展现的行为

- 搜索文章：联想用户想搜索的内容，并记录用户的历史搜索信息
- 个人中心：用户可以在其个人中心查看收藏、关注的人、以及系统设置等功能
- 查看文章：用户点击文章进入查看文章页面，在此页面上可进行点赞、评论、不喜欢、分享等操作；除此之外还需要收集用户查看文章的时间，是否看我等行为信息

- 实名认证：用户可以进行身份证认证和实名认证，实名认证之后即可成为自媒体人，在平台上发布文章
- 注册登录：登录时，验证内容为手机号登录/注册，通过手机号验证码进行登录/注册，首次登录用户自动注册账号。
### 自媒体端功能大纲
- 内容管理：自媒体用户管理文章页面，可以根据条件进行筛选，文章包含草稿、已发布、未通过、已撤回状态。用户可以对文章进行修改，上/下架操作、查看文章状态等操作
- 评论管理：管理文章评论页面，显示用户已发布的全部文章，可以查看文章总评论数和粉丝评论数，可以对文章进行关闭评论等操作

- 素材管理：管理自媒体文章发布的图片，便于用户发布带有多张图片的文章

- 图文数据：自媒体人发布文章的数据：阅读数、评论数、收藏了、转发量，用户可以查看对应文章的阅读数据
- 粉丝画像：内容包括：粉丝性别分布、粉丝年龄分布、粉丝终端分布、粉丝喜欢分类分布
### 平台管理端功能大纲
- 用户管理：系统后台用来维护用户信息，可以对用户进行增删改查操作，对于违规用户可以进行冻结操
- 用户审核：管理员审核用户信息页面，用户审核分为身份审核和实名审核，身份审核是对用户的身份信息进行审核，包括但不限于工作信息、资质信息、经历信息等；实名认证是对用户实名身份进行认证

- 内容管理：管理员查询现有文章，并对文章进行新增、删除、修改、置顶等操作
- 内容审核：管理员审核自媒体人发布的内容，包括但不限于文章文字、图片、敏感信息等
- 频道管理：管理频道分类界面，可以新增频道，查看频道，新增或修改频道关联的标签
- 网站统计：统计内容包括：日活用户、访问量、新增用户、访问量趋势、热门搜索、用户地区分布等数据
- 内容统计：统计内容包括：文章采集量、发布量、阅读量、阅读时间、评论量、转发量、图片量等数据
- 权限管理：超级管理员对后台管理员账号进行新增或删除角色操作
### 其它需求
![image](https://user-images.githubusercontent.com/82208902/212294226-d532dcef-e800-47cf-938f-290258cd3b22.png)
****
## 技术架构
包括前端（Weex、Vue、Echarts、WS）、网关（GateWay）、DevOps（单元测试、代码规范）

服务层中包括中间件（Kafka）、索引、微服务、大数据存储等重难点技术
![image](https://user-images.githubusercontent.com/82208902/212294702-88dbf93b-ac5d-4392-a6ef-6e015db78d25.png)
![image](https://user-images.githubusercontent.com/82208902/212294778-971e5b2c-f655-49aa-824c-ad0a3d6f5acd.png)
- Weex+Vue+WebSocket ：使用Weex跨平台开发工具，整合集成VUE框架，完成黑马头条移动端功能开发，并集成WebSocket实现即时消息（文章推荐、私信）的推送
- Vue+Echarts ： 自媒体系统使用Vue开发关键，集成Echarts图表框架，完成相关粉丝画像、数据分析等功能
- Vue+Echarts+WebSocket ： 管理系统也是使用Vue开发，集成Echarts，完成网站统计、内容统计等功能，集成WebSocket，实现系统看板实时数据自动化更新
- Spring-Cloud-Gateway : 微服务之前架设的网关服务，实现服务注册中的API请求路由，以及控制流速控制和熔断处理都是常用的架构手段，而这些功能Gateway天然支持
- PMD&P3C : 静态代码扫描工具，在项目中扫描项目代码，检查异常点、优化点、代码规范等，为开发团队提供规范统一，提升项目代码质量
- Junit : 在持续集成思想中，单元测试偏向自动化过程，项目通过Junit+Maven的集成实现这种过程
- 运用Spring Boot快速开发框架，构建项目工程；并结合Spring Cloud全家桶技术，实现后端个人中心、自媒体、管理中心等微服务。
- 运用RabbitMQ完成内部系统消息通知；与客户端系统消息通知；以及实时数据计算
- 运用Redis缓存技术，实现热数据的计算，NoSession等功能，提升系统性能指标
- 使用Mysql存储用户数据，以保证上层数据查询的高性能
- 使用Mongo存储用户热数据，以保证用户热数据高扩展和高性能指标
- 使用FastDFS/OSS作为静态资源存储器，在其上实现热静态资源缓存、淘汰等功能
- 运用ES搜索技术，对冷数据、文章数据建立索引，以保证冷数据、文章查询性能
- 实现实时数据分析与应用；比如文章推荐
- 运用AI技术，来完成系统自动化功能，以提升效率及节省成本。比如实名认证自动化
****
## 数据库涉及
### 分库设计
该项目采用的分库分表设计，因为业务比较复杂，后期的访问量巨大，为了分摊数据库的压力，整个项目用的不只是一个数据库。其中核心库有**6**个，每一个数据库解决的是一个业务点，非常接近与实际项目设计。
- **user数据库** app用户信息库，主要存储用户信息，用户动态，用户评论，用户认证等信息
- **behavior数据库**  用户行为库，主要存储用户行为，包括用户的转发，点赞，评论行为等
- **wemedia数据库**  自媒体库，主要存储自媒体人图文数据统计，账号信息，粉丝相关信息等。
- **article数据库**   app文章信息库，主要存储成功发布的文章信息。
- **admin数据库**  后台管理库，主要存储后台管理员的信息。
- **search数据库**  存储搜索相关数据   
### 核心数据流转图
![image](https://user-images.githubusercontent.com/82208902/212295245-542e8b06-2782-4460-a64c-b523a3990665.png)
> 说明：整个项目其核心数据为文章信息，上图主要说明文章的数据流转

> 1 爬虫系统从外网采集数据后入**爬虫库**，即爬虫库中保存了一份采集的文章信息

> 2 自媒体人可以通过发布文章后首先进入**自媒体库**

> 3 爬虫文章和自媒体文章最后都要经过审核成功后入**appinfo库**，这里面的文章信息，最终是要给app端用户所查看

> 4 在app端用户查看的时候，需要记录用户的一些行为，如转发、评论、点赞等需要入**用户行为库**
****
## 后端项目结构说明
【父项目下公共子项目】：

- heima-leadnews-common :  主要存储常量定义;
- heima-leadnews-basic:  新加入模块，基于springboot的自动配置，提供通用第三方框架的配置, 如: OSS, Redis, XXLJOB,内容安全 等等
- heima-leadnews-model ：项目中用到的Dto、Pojo、Mapper、Enums定义工程;
- heima-leadnews-utils : 工程公用工具类项目，包含加密/解密、Date、JSON等工具类;
- heima-leadnews-services: 抽取的微服务聚合工程，在此工程下创建所有业务微服务
- heima-leadnews-gateways: 抽取的网关服务聚合工程, 在此工程下创建需要的网关
- heima-leadnews-feigns: 抽取统一的feign接口，并做好自动配置，所有需要远程调用的工程引此依赖即可

【多个微服务】：

- user-service：用于实现APP端用户中心的功能，比如我的收藏、我的粉丝等功能；
- article-service：用于实现APP端文章的获取与搜索等功能；还包括频道、标签等功能；
- behavior-service：用于实现APP端各类行为数据的上传服务；
- search-service：用于封装项目中es搜索微服务；
- comment-service：用于实现APP端评论功能微服务；
- wemedia-service：用于实现自媒体管理端的功能；
- admin-service：用于实现后台管理系统的功能；
- gateway-service：网关服务
### 后端项目依赖环境：

- **JDK1.8**
- Intellij Idea
- Tomcat 8.5
- **Git** 
